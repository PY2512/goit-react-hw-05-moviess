{"version":3,"file":"static/js/moviesView.7c968655.chunk.js","mappings":"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","sources":["webpack://goit-react-hw-05-movies/./src/components/Error/Error.module.css?141d","components/Error/Error.jsx","webpack://goit-react-hw-05-movies/./src/components/MoviesList/MoviesListItem/MoviesListItem.module.css?c6de","components/MoviesList/MoviesListItem/MoviesListItem.jsx","webpack://goit-react-hw-05-movies/./src/components/MoviesList/MoviesList.module.css?de3d","components/MoviesList/MoviesList.jsx","services/Status.jsx","services/moviesApi.jsx","webpack://goit-react-hw-05-movies/./src/components/Searchbar/Searchbar.module.css?8d9e","components/Searchbar/Searchbar.jsx","webpack://goit-react-hw-05-movies/./src/views/MoviesView/Movies.module.css?4417","views/MoviesView/MoviesView.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Error_wrapper__Wc1dD\",\"message\":\"Error_message__Yybg9\"};","import PropTypes from 'prop-types';\r\nimport style from './Error.module.css';\r\n\r\nimport NotFoundPic from '../../images/not-found.jpg';\r\n\r\nfunction Error({ message }) {\r\n    return (\r\n        <div role=\"alert\" className={style.wrapper}>\r\n        <img\r\n            src={NotFoundPic}\r\n            width=\"650\"\r\n            alt=\"not found pic\"\r\n            className={style.img}\r\n        />\r\n        <p text={message} className={style.message}>\r\n            {message}\r\n        </p>\r\n        </div>\r\n    );\r\n}\r\n\r\nError.propTypes = {\r\n    message: PropTypes.string,\r\n};\r\n\r\nexport default Error;","// extracted by mini-css-extract-plugin\nexport default {\"listItem\":\"MoviesListItem_listItem__xJPuT\",\"poster\":\"MoviesListItem_poster__IvMQJ\",\"title\":\"MoviesListItem_title__n4mMR\"};","import { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport style from './MoviesListItem.module.css';\r\nimport noPosterImg from './../../../images/no-poster.jpg';\r\n\r\nconst MoviesListItem = ({\r\n    poster,\r\n    id,\r\n    title,\r\n    name,\r\n    releaseDate,\r\n    url,\r\n    location,\r\n    }) => (\r\n    <li className={style.listItem}>\r\n        <Link to={{ pathname: `${url}/${id}`, state: { from: location } }}>\r\n        <img\r\n            src={poster ? `https://image.tmdb.org/t/p/w500/${poster}` : noPosterImg}\r\n            alt={title || name}\r\n            className={style.poster}\r\n        />\r\n        <h2 className={style.title}>\r\n            {title || name}\r\n            {releaseDate && <span> ({releaseDate.slice(0, 4)})</span>}\r\n        </h2>\r\n        </Link>\r\n    </li>\r\n);\r\n\r\nMoviesListItem.propTypes = {\r\n    poster: PropTypes.string,\r\n    id: PropTypes.number.isRequired,\r\n    title: PropTypes.string,\r\n};\r\n\r\nexport default MoviesListItem;","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"MoviesList_list__NF6km\"};","import MoviesListItem from './MoviesListItem/MoviesListItem';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport style from './MoviesList.module.css';\r\n\r\nconst MoviesList = ({ movies, url, location }) => {\r\n    return (\r\n        <ul className={style.list}>\r\n        {movies.map(({ title, name, poster_path, id, release_date }) => (\r\n            <MoviesListItem\r\n            key={id}\r\n            title={title}\r\n            name={name}\r\n            releaseDate={release_date}\r\n            id={id}\r\n            poster={poster_path}\r\n            url={url}\r\n            location={location}\r\n            />\r\n        ))}\r\n        </ul>\r\n    );\r\n};\r\n\r\nMoviesList.propTypes = {\r\n    movies: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default MoviesList;","const Status = {\r\n    IDLE: 'idle',\r\n    PENDING: 'pending',\r\n    RESOLVED: 'resolved',\r\n    REJECTED: 'rejected',\r\n};\r\n\r\nexport default Status;","import axios from \"axios\";\r\n\r\nconst apiKey = '566ba5d0201ff094da11311999c70e6f';\r\n\r\naxios.defaults.baseURL = 'https://api.themoviedb.org/3';\r\naxios.defaults.params = { api_key: apiKey };\r\n\r\nconst fetchTrendingMovies = async (page = 1) => {\r\n  const { data } = await axios.get(`/trending/all/day?page=${page}`);\r\n  return data;\r\n};\r\n\r\nconst fetchMovies = async (query, page = 1) => {\r\n  const { data } = await axios.get(\r\n    `/search/movie?language=en-US&page=${page}&include_adult=false&query=${query}`,\r\n  );\r\n  return data;\r\n};\r\n\r\nconst fetchMovieDetail = async movieID => {\r\n  try {\r\n    const response = await axios.get(`/movie/${movieID}`);\r\n    if (response.status === 200) {\r\n      console.log('result', response.status);\r\n      return response.data;\r\n    }\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst fetchMovieCredits = async movieId => {\r\n  const { data } = await axios.get(`/movie/${movieId}/credits`);\r\n  return data;\r\n};\r\n\r\nconst fetchMovieReviews = async movieId => {\r\n  const { data } = await axios.get(`/movie/${movieId}/reviews`);\r\n  return data;\r\n};\r\n\r\nexport {\r\n  fetchTrendingMovies,\r\n  fetchMovies,\r\n  fetchMovieDetail,\r\n  fetchMovieCredits,\r\n  fetchMovieReviews,\r\n};","// extracted by mini-css-extract-plugin\nexport default {\"Searchbar\":\"Searchbar_Searchbar__sENQA\",\"SearchForm\":\"Searchbar_SearchForm__dXv74\",\"SearchFormButton\":\"Searchbar_SearchFormButton__THQ95\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__Rje4-\",\"SearchFormInput\":\"Searchbar_SearchFormInput__cQ474\"};","import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { toast } from 'react-toastify';\r\n\r\nimport style from './Searchbar.module.css';\r\n\r\nfunction Searchbar({ onSubmit }) {\r\n    const [query, setQuery] = useState('');\r\n\r\n    const handleChange = ({ currentTarget }) => {\r\n        setQuery(currentTarget.value);\r\n    };\r\n\r\n    const handleSubmit = event => {\r\n        event.preventDefault();\r\n        if (query.trim() === '') {\r\n        toast.info('Enter the name of movie to search ');\r\n        return;\r\n        }\r\n        onSubmit(query);\r\n        setQuery('');\r\n    };\r\n\r\n    return (\r\n        <>\r\n        <form className={style.Searchbar} onSubmit={handleSubmit}>\r\n            <input\r\n            className={style.SearchForm}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search movies\"\r\n            onChange={handleChange}\r\n            />\r\n            <button type=\"submit\" className={style.SearchFormButton}>\r\n            <span className={style.SearchFormButtonLabel}>Search</span>\r\n            </button>\r\n        </form>\r\n        </>\r\n    );\r\n}\r\n\r\nSearchbar.propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Searchbar;","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Movies_wrapper__j22Of\"};","import { useState, useEffect } from 'react';\r\nimport { useHistory, useLocation, useRouteMatch } from 'react-router-dom';\r\nimport { Pagination } from '@mui/material'; \r\nimport { fetchMovies } from './../../services/moviesApi';\r\nimport Status from './../../services/Status';\r\n\r\nimport Searchbar from './../../components/Searchbar/Searchbar';\r\nimport MoviesList from '../../components/MoviesList/MoviesList';\r\nimport Loader from '../../components/Loader/Loader';\r\nimport Error from '../../components/Error/Error';\r\nimport style from './Movies.module.css';\r\n\r\n\r\nfunction MoviesView() {\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const { url } = useRouteMatch();\r\n    const [totalPages, setTotalPages] = useState(0);\r\n    const [status, setStatus] = useState(Status.IDLE);\r\n    const [movies, setMovies] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    const [query, setQuery] = useState('');\r\n\r\n    const page = new URLSearchParams(location.search).get('page') ?? 1;\r\n\r\n    useEffect(() => {\r\n        if (location.search === '') {\r\n        return;\r\n        }\r\n\r\n        const newQuery = new URLSearchParams(location.search).get('query');\r\n        setQuery(newQuery, page);\r\n    }, [location.search, page]);\r\n\r\n    useEffect(() => {\r\n        if (!query) return;\r\n        const fetchMoviesBySearch = async () => {\r\n        setStatus(Status.PENDING);\r\n        try {\r\n            const { results, total_pages } = await fetchMovies(query, page);\r\n            if (results.length === 0) {\r\n            setError(`Nothing was found for your search \"${query}\"`);\r\n            setStatus(Status.REJECTED);\r\n            return;\r\n            }\r\n            setMovies(results);\r\n            setTotalPages(total_pages);\r\n            setStatus(Status.RESOLVED);\r\n        } catch (error) {\r\n            setStatus(Status.REJECTED);\r\n        }\r\n        };\r\n        fetchMoviesBySearch();\r\n    }, [query, page]);\r\n\r\n    const searchHandler = newQuery => {\r\n        if (query === newQuery) return;\r\n        setQuery(newQuery);\r\n        setMovies(null);\r\n        setError(null);\r\n        setStatus(Status.IDLE);\r\n        history.push({ ...location, search: `query=${newQuery}&page=1` });\r\n    };\r\n\r\n    const pageHandler = (event, page) => {\r\n        history.push({ ...location, search: `query=${query}&page=${page}` });\r\n    };\r\n\r\n    return (\r\n        <>\r\n        <Searchbar onSubmit={searchHandler} />\r\n        {status === Status.PENDING && <Loader />}\r\n        {status === Status.RESOLVED && (\r\n            <>\r\n            <MoviesList movies={movies} url={url} location={location} />\r\n            {totalPages > 1 && (\r\n                <div className={style.wrapper}>\r\n                <Pagination\r\n                    count={totalPages}\r\n                    onChange={pageHandler}\r\n                    page={Number(page)}\r\n                    showFirstButton\r\n                    showLastButton\r\n                />\r\n                </div>\r\n            )}\r\n            </>\r\n        )}\r\n        {status === Status.REJECTED && error && <Error message={error} />}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default MoviesView;"],"names":["message","role","className","style","src","NotFoundPic","width","alt","text","poster","id","title","name","releaseDate","url","location","to","pathname","state","from","noPosterImg","slice","movies","map","poster_path","release_date","IDLE","PENDING","RESOLVED","REJECTED","axios","api_key","fetchTrendingMovies","page","data","fetchMovies","query","fetchMovieDetail","movieID","response","status","console","log","fetchMovieCredits","movieId","fetchMovieReviews","onSubmit","useState","setQuery","event","preventDefault","trim","toast","type","autoComplete","autoFocus","placeholder","onChange","currentTarget","value","history","useHistory","useLocation","useRouteMatch","totalPages","setTotalPages","Status","setStatus","setMovies","error","setError","URLSearchParams","search","get","useEffect","newQuery","fetchMoviesBySearch","results","total_pages","length","push","Loader","MoviesList","Pagination","count","Number","showFirstButton","showLastButton","Error"],"sourceRoot":""}